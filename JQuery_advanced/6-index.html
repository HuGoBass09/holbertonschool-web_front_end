<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 6</title>
  </head>

  <body>
    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
      function createFamilyTree() {
        $("body").append(
          "<table><thead><th>Firstname</th><th>Lastname</th></thead></table>"
        );
        $("table").append("<tbody></tbody>");
      }

      function addNewMember(firstName, lastName, position) {
        if (position === "before") {
          $("tbody").prepend("<tr><td></td><td></td><td></td></tr>");
          $("tbody tr:first-child td:nth-child(1)").text(firstName);
          $("tbody tr:first-child td:nth-child(2)").text(lastName);
          $("tbody tr:first-child td:nth-child(3)").text("(x)");

          $("tbody tr:first-child td:nth-child(3)").click(function () {
            $(this).parent().remove();
          });

          $("tbody tr:first-child td:nth-child(3)").css({
            backgroundColor: "orange",
          });
        } else {
          $("tbody").append("<tr><td></td><td></td><td></td></tr>");
          $("tbody tr:last-child td:nth-child(1)").text(firstName);
          $("tbody tr:last-child td:nth-child(2)").text(lastName);
          $("tbody tr:last-child td:nth-child(3)").text("(x)");

          $("tbody tr:last-child td:nth-child(3)").click(function () {
            $(this).parent().remove();
          });

          $("tbody tr:last-child td:nth-child(3)").css({
            backgroundColor: "orange",
          });
        }
      }

      function createForm() {
        $("table").before(
          `<form><input type="text" /><input type="text" /><select><option value="before">Before</option><option value="after">After</option></select><input type="submit" /></form>`
        );

        $("form").submit(function (event) {
          event.preventDefault();

          const firstName = $("input").first().val();
          const lastName = $("input:nth-of-type(2)").val();
          const position = $("select").val();

          addNewMember(firstName, lastName, position);
        });
      }

      createFamilyTree();
      createForm();
    </script>
  </body>
</html>
